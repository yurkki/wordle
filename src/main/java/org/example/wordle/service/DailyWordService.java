package org.example.wordle.service;

import org.springframework.stereotype.Service;
import java.time.LocalDate;
import java.time.format.DateTimeFormatter;
import java.util.Arrays;
import java.util.List;

/**
 * Сервис для управления ежедневными словами
 */
@Service
public class DailyWordService {
    
    // Список слов для каждого дня (только 5-буквенные слова)
    private final List<String> dailyWords = Arrays.asList(
        "УСПЕХ", "АВТОР", "БАГАЖ", "ВЕТКА", "ГЛАЗА", "ЖИЗНЬ", "ИГРОК",
        "КАРТА", "ЛЕСОК", "МАСКА", "НОЖКА", "ПАРТА", "РЫБАК", "ТАБЛО",
        "ФИЛЬМ", "ШАПКА", "ЭКРАН", "АБЗАЦ",
        "АГЕНТ", "АДРЕС", "АЗАРТ", "АЗИАТ", "АКРЫЛ", "АКТИВ", "АЛМАЗ", "АЛЬБА", "АМБАР", "АМПЕР",
        "АНГАР", "АНИСА", "АПЕЛЬ", "АРБУЗ", "АРЕНА", "АРХИВ", "АСТРА", "АТЛАС", "БАЗАР", "БАЙКА",
        "БАЛЕТ", "БАНАН", "БАРЖА", "БАСНЯ", "БАТОН", "БЕГУН", "БЕЛКА", "БЕРЕГ", "БИЛЕТ", "БИРЖА",
        "БЛОКА", "БОГАТ", "БОЖИЙ", "БОКАЛ", "БОМБА", "БОРОН", "ВАГОН", "ВАЗОН", "ВАЛЕТ", "ВАЛЬС",
        "ВАННА", "ВЕСНА", "ВИДЕО", "ВИЛКА", "ВОЛНА", "ВОРОТ", "ВЫБОР",
        "АКТЁР", "АМЁБА", "АФЁРА", "АКЦИЯ", "АЛЛЕЯ", "АРМИЯ", "АРМЯК", "АРЬЯН",
        "БРАВО", "БРАГА", "БРАГИ", "БРАДА", "БРАКИ", "БРАМА", "БРАНЬ", "БРАСС", "БРАТЬ", "БРАЧА",
        "БРЕДА", "БРЕДУ", "БРЕЖУ", "БРЕЗГ", "БРЕЙК", "БРЕМЯ", "БРЕНД", "БРЕНЬ", "БРЕША", "БРЕШУ",
        "БРЕШЬ", "БРЕЩИ", "БРИДА", "БРИДЖ", "БРИКА",
        "ВАЛЁК", "ВАЛЁР", "ВАНЁК", "ВЗАЁМ", "ВЗДЁВ", "ВЗЛЁТ", "ВЗМЁТ", "ВИТЬЁ", "ВИЧЬЁ", "ВНАЁМ",
        "ВОПЁЖ", "ВОРЬЁ", "ВЫТЬЁ", "ВЁДРО", "ВАБЬЯ", "ВАДЬЯ", "ВАЖНЯ", "ВАЛЯЙ", "ВАЛЯХ", "ВАРЕЯ",
        "ВАРИЯ", "ВАРМЯ", "ВАРНЯ", "ВАРЯГ", "ВАФЛЯ",
        "ГАЛЬЁ", "ГАРЬЁ", "ГОДЬЁ", "ГОЛЬЁ", "ГРЁЗА", "ГРЁЗЫ", "ГУСЁК", "ГАЛЯЙ", "ГАСИЯ", "ГАСНЯ",
        "ГАЯТЬ", "ГЕВЕЯ", "ГИЛЯК", "ГИНЕЯ", "ГЛАМЯ", "ГЛЯДИ", "ГЛЯДЬ", "ГЛЯЖУ", "ГЛЯСЕ", "ГЛЯЧЕ",
        "ГОДНЯ", "ГОДЯЙ", "ГОЛАЯ", "ГОЛЬЯ", "ГОЛЯК",
        "ДАТЬЁ", "ДЕЛЁЖ", "ДЕНЁК", "ДОМЁК", "ДРАЁК", "ДРЁМА", "ДУБЬЁ", "ДУПЛЁ", "ДУТЬЁ", "ДЁЖКА",
        "ДЁРЕН", "ДЁРКА", "ДАЛИЯ", "ДАНАЯ", "ДАЯТИ", "ДВОЯК", "ДЕВАЯ", "ДЕЯТИ", "ДЕЯТЬ", "ДЗЯДЫ",
        "ДИВЬЯ", "ДИКАЯ", "ДНЯМИ", "ДОДНЯ", "ДОЙНЯ",
        "ЗАЛЁТ", "ЗАМЁТ", "ЗАРЁЙ", "ЗАРЁЮ", "ЗАТЁК", "ЗАТЁС", "ЗАЧЁС", "ЗАЧЁТ", "ЗЯТЁК", "ЗАВЕЯ",
        "ЗАВИЯ", "ЗАВЯЛ", "ЗАЗРЯ", "ЗАКЯТ", "ЗАПЯЛ", "ЗАРЯД", "ЗАТЕЯ", "ЗАТЛЯ", "ЗАТЯГ", "ЗАЯВО",
        "ЗАЯВЬ", "ЗАЯЗЬ", "ЗАЯНЯ", "ЗАЯТЬ", "ЗБРУЯ",
        "КАРЁК", "КВЁЛО", "КЛЁКТ", "КЛЁСТ", "КЛЁШИ", "КОВЁР", "КОЖЬЁ", "КОЗЁЛ", "КОНЁК", "КОПЬЁ",
        "КОПЁР", "КОРЬЁ", "КОРЁК", "КОСЬЁ", "КОСЁК", "КОТЁЛ", "КУЛЁК", "КУТЁЖ", "КАЛЬЯ", "КАМЕЯ",
        "КАМЬЯ", "КАПЛЯ", "КАПСЯ", "КАСИЯ", "КАФЛЯ",
        "ЛАРЁК", "ЛИКЁР", "ЛИНЁК", "ЛИТЬЁ", "ЛУТЬЁ", "ЛЁЖКА", "ЛЁТКА", "ЛЁТОМ", "ЛАДЬЯ", "ЛАЗЕЯ",
        "ЛАЗНЯ", "ЛАЗЬЯ", "ЛАНЬЯ", "ЛАЯТЬ", "ЛЕЖЕЯ", "ЛЕЖМЯ", "ЛЕПНЯ", "ЛЕТНЯ", "ЛЕЧЕЯ", "ЛЕШАЯ",
        "ЛЕШНЯ", "ЛИВМЯ", "ЛИЛЕЯ", "ЛИЛИЯ", "ЛИНЕЯ",
        "БИЛЕТ", "КНИГА", "ВЕСНА", "ОГОНЬ", "ДРОВА", "ПЕСОК", "СТЕПЬ", "ГОРОД", "ПТИЦА", "ЗВЕЗДА",
        "РУЧЕЙ", "КАМНИ", "ЛЫЖНЯ", "МОСТЫ", "ОВОЩИ", "ЧАЙКА", "САХАР", "СЕДЛО", "ПОЕЗД", "ЛАМПА",
        "ДИВАН", "РУЧКА", "КИСТЬ", "ТАНЕЦ", "ЗАРЯД", "ШАПКА", "ОБУВЬ", "РЕМЕНЬ", "НИТКА", "ТКАНЬ",
        "ЖИЛЕТ", "НОСКИ", "САПОГ", "РАМКА", "ФИЛЬМ", "СЦЕНА", "АКТЁР", "РОЛИК", "ДУБЛЬ", "СЮЖЕТ",
        "МЫСЛЬ", "РИФМА", "БУКВА", "ШКОЛА", "КЛАСС", "НАУКА", "ТЕОРИЯ", "ХИМИЯ", "ЧИСЛО", "ПАПКА",
        "ТЕКСТ", "ШРИФТ", "СКРИП", "ДОМЕН", "ПОЧТА", "ДРАЙВ"
    );
    
    /**
     * Получить слово дня для указанной даты
     */
    public String getWordForDate(LocalDate date) {
        // Используем хеш от даты для получения индекса слова
        int dayOfYear = date.getDayOfYear();
        
        // Фильтруем только 5-буквенные слова
        List<String> fiveLetterWords = dailyWords.stream()
            .filter(word -> word.length() == 5)
            .toList();
        
        if (fiveLetterWords.isEmpty()) {
            // Если нет 5-буквенных слов, возвращаем первое слово из списка
            return dailyWords.get(0);
        }
        
        // Используем индекс для выбора из 5-буквенных слов
        int wordIndex = dayOfYear % fiveLetterWords.size();
        return fiveLetterWords.get(wordIndex);
    }
    
    /**
     * Получить слово дня для сегодняшней даты
     */
    public String getTodayWord() {
        return getWordForDate(LocalDate.now());
    }
    
    /**
     * Проверить, является ли слово словом дня
     */
    public boolean isTodayWord(String word) {
        return word != null && word.equalsIgnoreCase(getTodayWord());
    }
    
    /**
     * Получить дату в формате строки для отображения
     */
    public String getTodayDateString() {
        return LocalDate.now().format(DateTimeFormatter.ofPattern("dd MMMM yyyy"));
    }
}
